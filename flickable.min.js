// Flickable.js 0.1.1 Copyright (c) 2013 @yuya
// See https://github.com/yhmt/flickable-js
(function(t,e){return"function"==typeof define&&"object"===define.amd?define("Flickable",[],function(){return e(t,t.document),t.Flickable}):e(t,t.document)})(this,function(t){t.Flickable={}}),function(t,e){var i;i=function(){function i(){this.div=e.createElement("div"),this.prefixes=["webkit","moz","o","ms"],this.saveProp={}}return i.prototype.getPage=function(t,e){return t.changedTouches?t.changedTouches[0][e]:t[e]},i.prototype.hasProp=function(t){var e,i,s;if(t instanceof Array){for(i=0,s=t.length;s>i;i++)if(e=t[i],void 0!==this.div.style[e])return!0;return!1}if("string"==typeof t)return void 0!==this.div.style[e]?!0:!1;throw new TypeError("Must be a Array or String")},i.prototype.setStyle=function(t,e){var i,s,o,r,n,h=this;o=t.style,i=this.saveProp[s],n=function(t,e,s){var o,r,n,a,p;if(i)t[i]=s;else{if(void 0===t[e]){for(p=h.prefixes,r=0,n=p.length;n>r;r++)if(o=p[r],a=h.ucFirst(o)+h.ucFirst(e),void 0!==t[a])return h.saveProp[e]=a,t[a]=s,!0;return!1}h.saveProp[e]=e,t[e]=s}},r=[];for(s in e)r.push(n(o,s,e[s]));return r},i.prototype.getCSSVal=function(t){var e,i,s,o,r,n;if("string"!=typeof t)throw new TypeError("Must be a String");if(void 0!==this.div.style[t])return t;for(n=this.prefixes,s=0,o=n.length;o>s;s++)e=n[s],r=this.ucFirst(e)+this.ucFirst(t),void 0!==this.div.style[r]&&(i="-"+e+"-"+t);return i},i.prototype.ucFirst=function(t){if("string"!=typeof t)throw new TypeError("Must be a String");return t.charAt(0).toUpperCase()+t.substr(1)},i.prototype.triggerEvent=function(t,i,s,o,r){var n,h;if("object"!=typeof t)throw Error("Must be a Element");if(h=e.createEvent("Event"),h.initEvent(i,s,o),r)for(n in r)h[n]=r[n];return t.dispatchEvent(h)},i.prototype.checkBrowser=function(){var e,i,s,o,r;return r=t.navigator.userAgent.toLowerCase(),o=r.match(/(?:iphone\sos|ip[oa]d.*os)\s([\d_]+)/),e=r.match(/(android)\s+([\d.]+)/),i=o?"ios":e?"android":"pc",s=function(){return o||e?parseFloat((o||e).pop().split(/\D/).join("."),10):null}(),{name:i,version:s,isLegacy:!!e&&3>s}},i.prototype.checkSupport=function(){var e,i,s;return i=this.hasProp(["perspectiveProperty","WebkitPerspective","MozPerspective","msPerspective","OPerspective"]),e=this.hasProp(["transformProperty","WebkitTransform","MozTransform","msTransform","OTransform"]),s=this.hasProp(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","msTransitionProperty","OTransitionProperty"]),{touch:"ontouchstart"in t,eventListener:"addEventListener"in t,transform3d:i,transform:e,transition:s,cssAnimation:i||e&&s?!0:!1}},i.prototype.checkTouchEvents=function(){var t;return t=this.checkSupport().touch,{start:t?"touchstart":"mousedown",move:t?"touchmove":"mousemove",end:t?"touchend":"mouseup"}},i.prototype.getDeviceWidth=function(){return t.innerWidth},i.prototype.getElementWidth=function(e){var i,s,o,r,n,h,a;if(void 0===e)throw Error("Element Not Found");return o=t.getComputedStyle(e),s=void 0,r=function(){var t,i,o,r;for(i=["-webkit-box-sizing","-moz-box-sizing","-o-box-sizing","-ms-box-sizing","box-sizing"],o=0,r=i.length;r>o;o++)if(t=i[o],void 0!==e.style[t])return s=e.style[t],!0;return!1}(),r&&"content-box"!==s?0===e.scrollWidth?(a=parseFloat(e.style.width.match(/\d+/),10),e.style.boxSizing&&e.style.webkitBoxSizing||(e.style.paddingRight&&(a+=parseFloat(e.style.paddingRight.match(/\d+/),10)),e.style.paddingLeft&&(a+=parseFloat(e.style.paddingLeft.match(/\d+/),10))),a):a=e.scrollWidth:(h=function(t){var e,i,s,r,n,h;for(r=[],s=0,e=n=0,h=t.length;h>n;e=++n)i=t[e],o[i]&&(r[e]=parseFloat(o[t[0]].match(/\d+/),10),s+=r[e]);return s},i=h(["border-right-width","border-left-width"]),n=h(["padding-right","padding-left"]),a=e.scrollWidth+i+n)},i.prototype.getTranslate=function(t,e,i,s){return null==t&&(t=!0),null==i&&(i=0),null==s&&(s=0),this.opts.use3d?"translate3d("+e+"px, 0, 0)":"translate("+e+"px, 0)"},i.prototype.getTransitionEndEventName=function(){var e,i,s,o,r;switch(o=t.navigator.userAgent.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/.exec(o)||/(firefox)[ \/]([\w.]+)/.exec(o)||/(msie) ([\w.]+)/.exec(o)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(o)||[],e=i[1],r=parseFloat(i[2],10),"msie"===e&&r>=10&&(e="modernIE"),e){case"webkit":s="webkitTransitionEnd";break;case"opera":s="oTransitionEnd";break;case"firefox":case"modernIE":s="transitionend";break;default:s=void 0}},i}(),t.Flickable.Helper=i}(this,this.document),function(t,e){var i,s;s=t.Flickable.Helper,i=function(){function i(i,o,r){var n,h=this;if(!i)throw Error("Element Not Found");if(i.length&&(i=i[0]),this.el="string"==typeof i?e.querySelector(i):i,this.opts=o||{},this.helper=new s,this.browser=this.helper.checkBrowser(),this.support=this.helper.checkSupport(),this.events=this.helper.checkTouchEvents(),this.opts.use3d=this.opts.disable3d?!1:this.support.transform3d,this.opts.useJsAnimate=!1,this.opts.disableTouch=this.opts.disableTouch||!1,this.opts.disable3d=this.opts.disable3d||!1,this.opts.setWidth=this.opts.setWidth||!1,this.opts.fitWidth=this.opts.fitWidth||!1,this.opts.autoPlay=this.opts.autoPlay||!1,this.opts.interval=this.opts.interval||6600,this.opts.loop=this.opts.loop||(this.opts.autoPlay?!0:!1),this.opts.transition=this.opts.transition||{},this.opts.transition={timingFunction:this.opts.transition.timingFunction||"cubic-bezier(0.23, 1, 0.32, 1)",duration:function(){return h.opts.transition.duration||(h.browser.isLegacy?"200ms":"330ms")}()},this.currentPoint=void 0===this.opts.currentPoint&&this.opts.loop?1:this.opts.currentPoint||0,this.maxPoint=this.currentX=this.maxX=0,this.gestureStart=this.moveReady=this.scrolling=this.didCloneNode=!1,this.startTime=this.timerId=this.basePageX=this.startPageX=this.startPageY=this.distance=null,this.support.cssAnimation&&!this.browser.isLegacy?this.helper.setStyle(this.el,{transitionProperty:this.helper.getCSSVal("transform"),transitionDuration:"0ms",transitionTimingFunction:this.opts.transition.timingFunction,transform:this._getTranslate(0)}):this.browser.isLegacy?this.helper.setStyle(this.el,{position:"relative",left:"0px",transitionProperty:"left",transitionDuration:"0ms",transitionTimingFunction:this.opts.transition.timingFunction}):this.helper.setStyle(this.el,{position:"relative",left:"0px"}),this.support.eventListener&&(e.addEventListener("gesturestart",function(){h.gestureStart=!0},!1),e.addEventListener("gestureend",function(){h.gestureStart=!1},!1)),this.opts.autoPlay&&(this._startAutoPlay(),t.addEventListener("blur",function(){return h._clearAutoPlay()},!1),t.addEventListener("focus",function(){return h._startAutoPlay()},!1)),this.opts.fitWidth&&(n="pc"===this.browser.name?"resize":"orientationchange",t.addEventListener(n,function(){return h.refresh()},!1)),this.el.addEventListener(this.events.start,this,!1),this.opts.loop&&this._cloneNode(),r&&"function"!=typeof r)throw new TypeError("Must be a Function");r&&r(),this.refresh()}return i.prototype.handleEvent=function(t){switch(t.type){case this.events.start:return this._touchStart(t);case this.events.move:return this._touchMove(t);case this.events.end:return this._touchEnd(t);case"click":return this._click(t)}},i.prototype.refresh=function(){var t,e=this;return this.opts.fitWidth?this._setTotalWidth(this.helper.getDeviceWidth()):this.opts.setWidth&&this._setTotalWidth(),t=function(){var t,i,s,o,r,n;for(t=e.el.childNodes,s=0,i=r=0,n=t.length;n>r;i=++r)o=t[i],1===o.nodeType&&s++;return s>0&&s--,s},this.maxPoint=void 0===this.opts.maxPoint?t():this.opts.maxPoint,this.distance=void 0===this.opts.distance?this.el.scrollWidth/(this.maxPoint+1):this.opts.distance,this.maxX=-this.distance*this.maxPoint,this.moveToPoint()},i.prototype.hasPrev=function(){return this.currentPoint>0},i.prototype.hasNext=function(){return this.currentPoint<this.maxPoint},i.prototype.toPrev=function(){return this.hasPrev()?this.moveToPoint(this.currentPoint-1):void 0},i.prototype.toNext=function(){return this.hasNext()?this.moveToPoint(this.currentPoint+1):void 0},i.prototype.moveToPoint=function(t,e){var i;return null==t&&(t=this.currentPoint),null==e&&(e=this.opts.transition.duration),i=this.currentPoint,this.currentPoint=0>t?0:t>this.maxPoint?this.maxPoint:parseInt(t,10),this.support.cssAnimation?this.helper.setStyle(this.el,{transitionDuration:e}):this.opts.useJsAnimate=!0,this._setX(-this.currentPoint*this.distance,e),i!==this.currentPoint&&(this.helper.triggerEvent(this.el,"flpointmove",!0,!1),this.opts.loop)?this._loop():void 0},i.prototype._setX=function(t,e){return null==e&&(e=this.opts.transition.duration),this.currentX=t,this.support.cssAnimation&&!this.browser.isLegacy?this.helper.setStyle(this.el,{transform:this._getTranslate(t)}):!this.browser.isLegacy&&this.otps.useJsAnimate?this._jsAnimate(t,e):(this.el.style.left=""+t+"px",void 0)},i.prototype._touchStart=function(t){return this.opts.disableTouch||this.gestureStart?void 0:(this.opts.loop&&(this.currentPoint===this.maxPoint?this.moveToPoint(1,0):0===this.currentPoint&&this.moveToPoint(this.maxPoint-1,0)),this.el.addEventListener(this.events.move,this,!1),e.addEventListener(this.events.end,this,!1),this.support.touch||t.preventDefault(),this.support.cssAnimation?this.helper.setStyle(this.el,{transitionDuration:"0ms"}):this.opts.useJsAnimate=!1,this.scrolling=!0,this.moveReady=!1,this.startPageX=this.helper.getPage(t,"pageX"),this.startPageY=this.helper.getPage(t,"pageY"),this.basePageX=this.startPageX,this.directionX=0,this.startTime=t.timeStamp,this.helper.triggerEvent(this.el,"fltouchstart",!0,!1))},i.prototype._touchMove=function(t){var e,i,s,o,r,n,h;return this.opts.autoPlay&&this._clearAutoPlay(),this.scrolling||this.gestureStart?(n=this.helper.getPage(t,"pageX"),h=this.helper.getPage(t,"pageY"),this.moveReady?(t.preventDefault(),t.stopPropagation(),s=n-this.basePageX,r=this.currentX+s,(r>=0||this.maxX>r)&&(r=Math.round(this.currentX+s/3)),this.directionX=0===s?this.directionX:s>0?-1:1,o=!this.helper.triggerEvent(this.el,"fltouchmove",!0,!0,{delta:s,direction:this.directionX}),o?this._touchAfter({moved:!1,originalPoint:this.currentPoint,newPoint:this.currentPoint,cancelled:!0}):this._setX(r)):(e=Math.abs(n-this.startPageX),i=Math.abs(h-this.startPageY),e>5?(t.preventDefault(),t.stopPropagation(),this.moveReady=!0,this.el.addEventListener("click",this,!0)):i>5&&(this.scrolling=!1)),this.basePageX=n,this.opts.autoPlay?this._startAutoPlay():void 0):void 0},i.prototype._touchEnd=function(){var t,i=this;return this.el.removeEventListener(this.events.move,this,!1),e.removeEventListener(this.events.end,this,!1),this.scrolling?(t=function(){var t;return t=-i.currentX/i.distance,i.directionX>0?Math.ceil(t):0>i.directionX?Math.floor(t):Math.round(t)}(),0>t?t=0:t>this.maxPoint&&(t=this.maxPoint),this._touchAfter({moved:t!==this.currentPoint,originalPoint:this.currentPoint,newPoint:t,cancelled:!1}),this.moveToPoint(t)):void 0},i.prototype._touchAfter=function(e){var i=this;return this.scrolling=!1,this.moveReady=!1,t.setTimeout(function(){return i.el.removeEventListener("click",i,!0)},200),this.helper.triggerEvent(this.el,"fltouchend",!0,!1,e)},i.prototype._click=function(t){return t.stopPropagation(),t.preventDefault()},i.prototype._getTranslate=function(t){return this.opts.use3d?"translate3d("+t+"px, 0, 0)":"translate("+t+"px, 0)"},i.prototype._cloneNode=function(){var t,e,i,s,o,r,n;if(t=this.el.childNodes,i=[],this.opts.loop||this.didCloneNode){for(r=0,n=t.length;n>r;r++)o=t[r],1===o.nodeType&&i.push(o);e=i.shift(),s=i.pop(),this.el.insertBefore(s.cloneNode(!0),e),this.el.appendChild(e.cloneNode(!0)),this.didCloneNode=!0}},i.prototype._startAutoPlay=function(){var e,i,s=this;if(this.opts.autoPlay)return i=function(){return s.toNext()},e=this.opts.interval,function(){s.timerId=t.setInterval(i,e)}()},i.prototype._clearAutoPlay=function(){return t.clearInterval(this.timerId)},i.prototype._setTotalWidth=function(t){var e,i,s,o,r,n,h;if(t&&"number"!=typeof t)throw new TypeError("Must be a Number");for(e=this.el.childNodes,i=0!==e.length?[]:[this.el],n=0,h=e.length;h>n;n++)o=e[n],1===o.nodeType&&i.push(o);s=t?t:this.helper.getElementWidth(i[0]),r=i.length*s,this.el.style.width=""+r+"px"},i.prototype._loop=function(){var e,i,s,o,r,n=this;return i=this.maxPoint-1,e=this.opts.interval/2,s=function(){return n.currentPoint===n.maxPoint?n.moveToPoint(1,0):0===n.currentPoint?n.moveToPoint(i,0):void 0},r=this.helper.getTransitionEndEventName(),void 0!==r?(this.el.addEventListener(r,s,!1),t.setTimeout(function(){return n.el.removeEventListener(r,s,!1)},e)):(o=s,t.clearTimeout(function(){return s()},e))},i.prototype._jsAnimate=function(e,i){var s,o,r,n,h;s=+new Date,r=parseInt(this.el.style.left,10),h=e,i=parseInt(i,10)||this.opts.transition.duration,o=function(t,e){return-(t/=e)*(t-2)},n=t.setInterval(function(){var e,a,p;p=new Date-s,p>i?(t.clearInterval(n),e=h):(a=o(p,i),e=a*(h-r)+r),this.el.style.left=""+e+"px"},10)},i.prototype.destroy=function(){return this.opts.autoPlay&&this._clearAutoPlay(),this.el.removeEventListener(this.events.start,this,!1)},i}(),t.Flickable=i}(this,this.document);